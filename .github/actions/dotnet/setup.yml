name: Setup .NET SDK with cache
description: Call actions/setup-dotnet with NuGet packages cache.
inputs:
  dotnet-version:
    description: 'Optional SDK version(s) to use. If not provided, will install global.json version when available. Examples: 2.2.104, 3.1, 3.1.x'
  dotnet-quality:
    description: 'Optional quality of the build. The possible values are: daily, signed, validated, preview, ga.'
    default: false
  nuget-path:
    description: Path to use for the global-packages folder
    default: ${{ github.workspace }}/.nuget/packages
runs:
  using: composite
  steps:
    - shell: bash
      run: |
        echo "DOTNET_CLI_TELEMETRY_OPTOUT=true" >> $GITHUB_ENV
        echo "DOTNET_NOLOGO=true" >> $GITHUB_ENV
        echo "NUGET_PACKAGES=${{ inputs.nuget-path }}" >> $GITHUB_ENV
    - uses: actions/cache@v3.0.11
      with:
        path: ${{ inputs.nuget-path }}
        key: ${{ runner.os }}-nuget-${{ hashFiles('**/packages.lock.json') }}
        restore-keys: |
          ${{ runner.os }}-nuget-
    - uses: actions/setup-dotnet@v3.0.2
      with:
        dotnet-version: ${{ inputs.dotnet-version }}
        dotnet-quality: ${{ inputs.dotnet-quality }}
